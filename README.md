# Java-Lab-4

Car factory 

# 1. Цель проекта

Написать фабрику конструирующую машины из запчастей

#2. Описание системы
Система состоит из 4ех разделов:
1. Domain: в этом разделе будут содержаться сущности используемые на протяжении всей програмы, такие как Engine, CarBody, Accessory, Car
2. Application: в этом разделе будут use cases (Supplier, Worker, Dealer), будет соединяться со следующим разделом посредством интерфейсов. Также тут содержится главная модель программы CarFactory и ThreadPool, который следит за всеми процессами
3. Infrastructure: в этом разделе содержаться controllers, которые нужны для связи между складами и use cases
4. Storages and views: в этом разделе будут склады для авто-запчастей и FactoryView

##2.1. Domain. Entities
Engine, CarBody, Accessory должны содержать в себе id и фабричный метод для их поставки и генерации id,
машина(Car) собирается из двигателя, кузова и аксессуаров

##2.1. Application. 

###2.1.1. Supplier(Поставщик)
Содержит в себе алгоритм поставки детали через 2 интерфейса, один из которых служит для поставки детали, другой для отправки ее на склад.
Если склад полон, то поставщик ожидает пока склад осовободиться, должны использовать мониторы синхронизации.

Запускается раз в И секунд

###2.1.2. Worker(Сборщик)
Берет со складов запчастей по одной детали, создает машину с этими деталями.
Если на складе нет детали, или если на складе машин нет места, то поток ждет.
Далее сборщик отправляет на склад готовую машину.

Запускается при сигнале от CarStorageController

###2.1.3. Dealer(Торговец)
Берет со склада машину, и продает(пустое поведение), если на складе нет машины, то он ожидает, пока она там не появится.
При отправке машины дилеру информация о покупке должна писаться в
лог работы фабрики (в файл) в виде строки:
(&lt;Time&gt;: Dealer &lt;Number&gt;: Auto &lt;ID&gt; (Body: &lt;ID&gt;, Motor: &lt;ID&gt;, Accessory: &lt;ID&gt;)

Запускается раз в M секунд

###2.1.4 CarFactory(Model)

Поля:
* max num engines in EngineStorage
* max num car bodies in CarBodyStorage
* max num accessories in AccessoryStorage
* max num cars in CarStorage
* max num suppliers
* max num workers
* max num dealers
* is logging 
* suppliers timeout = N
* dealers timeout = M

##2.3. Infrastructure

### 2.3.1 FactoryController

Связь между CarFactory и FactoryView

### 2.3.2 ControllerFinishedCarStorage

Поток контроллера склада готовой продукции просыпается при любом отправке
машины со склада продукции. Он анализирует состояние склада и передает запрос
на изготовление новых машин (в случае необходимости) на фабрику.

##2.4. Storages, view and thread pools

Должно быть сделано 3 типа складов: двигателей, аксессуаров и кузовов.

###2.4.1 Storage

Содержит список соответствующих ему деталей 

###2.4.2 FinishedCarStorage

Содержит список готовых машин

###2.4.3 FactoryView

* Скорость запрашивания машин можно регулировать ползунком в интерфейсе окна. Интерфейс также должен показывать
кол-во произведенных машин (вообще) и кол-во машин на складе в данный
момент.
* Интерфейс должен отображать, сколько
всего было сделано машин и сколько задач еще ждут исполнителя (в очереди задач
ThreadPool).
* 

###2.4.4 Thread pool

На фабрике работает несколько потоков (сборщиков) в рамках ThreadPool.
Задачами для ThreadPool являются запросы на создание новых машин (от
контроллера склада готовых изделий).

###3. Конфигурационный файл
Конфигурационный файл должен предоставлять настройки для задания
вместимости всех складов и количестве всех типов потоков. Примерный список
параметров в конфигурационном файле (просьба использовать свои имена):

StorageBodySize=100\
StorageMotorSize=100\
StorageAccessorySize=100\
StorageAutoSize=100\
AccessorySuppliers=5\
Workers=10\
Dealers=20\
LogSale=true (_Логировать или нет?_)